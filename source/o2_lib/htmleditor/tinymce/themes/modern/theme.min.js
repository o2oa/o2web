tinymce.ThemeManager.add("modern",function(e){var t=this,i=e.settings,n=tinymce.ui.Factory,r=tinymce.each,o=tinymce.DOM;var s={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};var a="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | "+"bullist numlist outdent indent | link image";function l(){var t=[];function o(o){var s=[],a;if(!o){return}r(o.split(/[ ,]/),function(t){var r;function o(){var i=e.selection;if(r=="bullist"){i.selectorChanged("ul > li",function(e,i){var n,r=i.parents.length;while(r--){n=i.parents[r].nodeName;if(n=="OL"||n=="UL"){break}}t.active(e&&n=="UL")})}if(r=="numlist"){i.selectorChanged("ol > li",function(e,i){var n,r=i.parents.length;while(r--){n=i.parents[r].nodeName;if(n=="OL"||n=="UL"){break}}t.active(e&&n=="OL")})}if(t.settings.stateSelector){i.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},true)}if(t.settings.disabledStateSelector){i.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}}if(t=="|"){a=null}else{if(n.has(t)){t={type:t};if(i.toolbar_items_size){t.size=i.toolbar_items_size}s.push(t);a=null}else{if(!a){a={type:"buttongroup",items:[]};s.push(a)}if(e.buttons[t]){r=t;t=e.buttons[r];if(typeof t=="function"){t=t()}t.type=t.type||"button";if(i.toolbar_items_size){t.size=i.toolbar_items_size}t=n.create(t);a.items.push(t);if(e.initialized){o()}else{e.on("init",o)}}}}});t.push({type:"toolbar",layout:"flow",items:s});return true}if(tinymce.isArray(i.toolbar)){if(i.toolbar.length===0){return}tinymce.each(i.toolbar,function(e,t){i["toolbar"+(t+1)]=e});delete i.toolbar}for(var s=1;s<10;s++){if(!o(i["toolbar"+s])){break}}if(!t.length&&i.toolbar!==false){o(i.toolbar||a)}if(t.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:t}}}function f(){var t,n=[];function o(t){var i;if(t=="|"){return{text:"|"}}i=e.menuItems[t];return i}function a(t){var n,a,l,f,u;u=tinymce.makeMap((i.removed_menuitems||"").split(/[ ,]/));if(i.menu){a=i.menu[t];f=true}else{a=s[t]}if(a){n={text:a.title};l=[];r((a.items||"").split(/[ ,]/),function(e){var t=o(e);if(t&&!u[e]){l.push(o(e))}});if(!f){r(e.menuItems,function(e){if(e.context==t){if(e.separator=="before"){l.push({text:"|"})}if(e.prependToContext){l.unshift(e)}else{l.push(e)}if(e.separator=="after"){l.push({text:"|"})}}})}for(var c=0;c<l.length;c++){if(l[c].text=="|"){if(c===0||c==l.length-1){l.splice(c,1)}}}n.menu=l;if(!n.menu.length){return null}}return n}var l=[];if(i.menu){for(t in i.menu){l.push(t)}}else{for(t in s){l.push(t)}}var f=typeof i.menubar=="string"?i.menubar.split(/[ ,]/):l;for(var u=0;u<f.length;u++){var c=f[u];c=a(c);if(c){n.push(c)}}return n}function u(t){function i(e){var i=t.find(e)[0];if(i){i.focus(true)}}e.shortcuts.add("Alt+F9","",function(){i("menubar")});e.shortcuts.add("Alt+F10","",function(){i("toolbar")});e.shortcuts.add("Alt+F11","",function(){i("elementpath")});t.on("cancel",function(){e.focus()})}function c(t,n){var r,s,a,l;function f(e){return{width:e.clientWidth,height:e.clientHeight}}r=e.getContainer();s=e.getContentAreaContainer().firstChild;a=f(r);l=f(s);if(t!==null){t=Math.max(i.min_width||100,t);t=Math.min(i.max_width||65535,t);o.css(r,"width",t+(a.width-l.width));o.css(s,"width",t)}n=Math.max(i.min_height||100,n);n=Math.min(i.max_height||65535,n);o.css(s,"height",n);e.fire("ResizeEditor")}function d(i,n){var r=e.getContentAreaContainer();t.resizeTo(r.clientWidth+i,r.clientHeight+n)}function m(r){var s,a;if(i.fixed_toolbar_container){a=o.select(i.fixed_toolbar_container)[0]}function c(){if(s&&s.moveRel&&s.visible()&&!s._fixed){var t=e.selection.getScrollContainer(),i=e.getBody();var n=0,r=0;if(t){var a=o.getPos(i),l=o.getPos(t);n=Math.max(0,l.x-a.x);r=Math.max(0,l.y-a.y)}s.fixed(false).moveRel(i,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl"]).moveBy(n,r)}}function d(){if(s){s.show();c();o.addClass(e.getBody(),"mce-edit-focus")}}function m(){if(s){s.hide();o.removeClass(e.getBody(),"mce-edit-focus")}}function h(){if(s){if(!s.visible()){d()}return}s=t.panel=n.create({type:a?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:!!a,border:1,items:[i.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:f()},l()]});e.fire("BeforeRenderUI");s.renderTo(a||document.body).reflow();u(s);d();e.on("nodeChange",c);e.on("activate",d);e.on("deactivate",m);e.nodeChanged()}i.content_editable=true;e.on("focus",function(){if(r.skinUiCss){tinymce.DOM.styleSheetLoader.load(r.skinUiCss,h,h)}else{h()}});e.on("blur",m);e.on("remove",function(){if(s){s.remove();s=null}});if(r.skinUiCss){tinymce.DOM.styleSheetLoader.load(r.skinUiCss)}return{}}function h(r){var o,s,a;if(r.skinUiCss){tinymce.DOM.loadCSS(r.skinUiCss)}o=t.panel=n.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[i.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:f()},l(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});if(i.resize!==false){s={type:"resizehandle",direction:i.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;a={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){if(i.resize=="both"){c(a.width+e.deltaX,a.height+e.deltaY)}else{c(null,a.height+e.deltaY)}}}}if(i.statusbar!==false){o.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath"},s]})}if(i.readonly){o.find("*").disabled(true)}e.fire("BeforeRenderUI");o.renderBefore(r.targetNode).reflow();if(i.width){tinymce.DOM.setStyle(o.getEl(),"width",i.width)}e.on("remove",function(){o.remove();o=null});u(o);return{iframeContainer:o.find("#iframe")[0].getEl(),editorContainer:o.getEl()}}t.renderUI=function(n){var r=i.skin!==false?i.skin||"lightgray":false;if(r){var o=i.skin_url;if(o){o=e.documentBaseURI.toAbsolute(o)}else{o=tinymce.baseURL+"/skins/"+r}if(tinymce.Env.documentMode<=7){n.skinUiCss=o+"/skin.ie7.min.css"}else{n.skinUiCss=o+"/skin.min.css"}e.contentCSS.push(o+"/content"+(e.inline?".inline":"")+".min.css")}e.on("ProgressState",function(e){t.throbber=t.throbber||new tinymce.ui.Throbber(t.panel.getEl("body"));if(e.state){t.throbber.show(e.time)}else{t.throbber.hide()}});if(i.inline){return m(n)}return h(n)};t.resizeTo=c;t.resizeBy=d});