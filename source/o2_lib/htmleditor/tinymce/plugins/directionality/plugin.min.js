tinymce.PluginManager.add("directionality",function(t){function e(e){var i=t.dom,n,r=t.selection.getSelectedBlocks();if(r.length){n=i.getAttrib(r[0],"dir");tinymce.each(r,function(t){if(!i.getParent(t.parentNode,"*[dir='"+e+"']",i.getRoot())){if(n!=e){i.setAttrib(t,"dir",e)}else{i.setAttrib(t,"dir",null)}}});t.nodeChanged()}}function i(t){var e=[];tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(i){e.push(i+"[dir="+t+"]")});return e.join(",")}t.addCommand("mceDirectionLTR",function(){e("ltr")});t.addCommand("mceDirectionRTL",function(){e("rtl")});t.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:i("ltr")});t.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:i("rtl")})});